{"ast":null,"code":"var _jsxFileName = \"/Users/liuxiaoyan/Desktop/orange/src/Coponent/Search.js\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\n\nclass Search extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInputChange = event => {\n      event.preventDefault();\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.downloadFile = async () => {\n      const {\n        items\n      } = this.state;\n      console.log(\"file\", items);\n      const fileName = \"d\";\n      const json = JSON.stringify(items);\n      const blob = new Blob([json], {\n        type: 'application/json'\n      });\n      const href = await URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = href;\n      link.download = fileName + \".js\";\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      const f = \"./d.js\";\n      f.write(\"export default \");\n    };\n\n    this.state = {\n      city: \"\",\n      suburb: \"\",\n      check_in_date: \"\",\n      check_out_date: \"\",\n      querystr: \"city=sydney&suburb=maroubra&check_in_date=2020-04-03&check_out_date=2020-04-07\",\n      items: [],\n      search_data: [],\n      isloaded: false\n    };\n  }\n\n  async getData() {\n    const data = this.state;\n    console.log(data);\n    const usp = new URLSearchParams(this.state.querystr);\n    usp.set('city', this.state.city);\n    usp.set('suburb', this.state.suburb);\n    usp.set('check_in_date', this.state.check_in_date);\n    usp.set('check_out_date', this.state.check_out_date);\n    console.log(usp);\n    var url = \"http://127.0.0.1:8081/v2/room/search?\";\n    url += usp;\n    Axios.get(url).then(res => {\n      console.log(\"res:\", res.data); //this.props.updateitems(res.data);\n\n      this.props.handlesearchdata(data);\n      this.setState({\n        items: res.data,\n        isloaded: true,\n        search_data: data\n      });\n      this.downloadFile();\n    });\n  }\n\n  render() {\n    const {\n      city,\n      suburb,\n      check_in_date,\n      check_out_date,\n      items\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"back\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Find your place\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"ci\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"City:\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"city\",\n      value: city,\n      placeholder: \"input city name\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"ci\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Suburb:\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"suburb\",\n      value: suburb,\n      placeholder: \"input suburb name\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"ci\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Check in:\"), React.createElement(\"input\", {\n      type: \"date\",\n      name: \"check_in_date\",\n      value: check_in_date,\n      placeholder: \"input check in date\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"ci\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Check out:\"), React.createElement(\"input\", {\n      type: \"date\",\n      name: \"check_out_date\",\n      value: check_out_date,\n      placeholder: \"input check out date\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"sea_button\",\n      onClick: () => {\n        this.getData();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"search\"))));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/liuxiaoyan/Desktop/orange/src/Coponent/Search.js"],"names":["React","Component","Axios","Search","constructor","props","handleInputChange","event","preventDefault","setState","target","name","value","downloadFile","items","state","console","log","fileName","json","JSON","stringify","blob","Blob","type","href","URL","createObjectURL","link","document","createElement","download","body","appendChild","click","removeChild","f","write","city","suburb","check_in_date","check_out_date","querystr","search_data","isloaded","getData","data","usp","URLSearchParams","set","url","get","then","res","handlesearchdata","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Axios from 'axios';\n\n\nclass Search extends Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            city: \"\",\n            suburb: \"\",\n            check_in_date:\"\",\n            check_out_date:\"\",\n            querystr:\"city=sydney&suburb=maroubra&check_in_date=2020-04-03&check_out_date=2020-04-07\",\n            items:[],\n            search_data:[],\n            isloaded:false\n        }\n    }\n\n    async getData(){\n        const data=this.state\n        console.log(data)\n        const usp= new URLSearchParams(this.state.querystr)\n        usp.set('city',this.state.city)\n        usp.set('suburb',this.state.suburb)\n        usp.set('check_in_date',this.state.check_in_date)\n        usp.set('check_out_date',this.state.check_out_date)\n        console.log(usp)\n\n        var url=\"http://127.0.0.1:8081/v2/room/search?\"\n        url+=usp\n        Axios.get(url)\n            .then(res=>{\n                console.log(\"res:\",res.data);\n                //this.props.updateitems(res.data);\n                this.props.handlesearchdata(data);    \n                this.setState({items: res.data,\n                                isloaded:true,\n                                search_data:data})\n                this.downloadFile()\n            });   \n    }\n    handleInputChange = (event) =>{\n        event.preventDefault()\n        this.setState({\n            [event.target.name] : event.target.value\n        })\n    }\n    downloadFile = async () => {\n        const {items} = this.state; \n        console.log(\"file\",items)\n        const fileName = \"d\";\n        const json = JSON.stringify(items);\n        const blob = new Blob([json],{type:'application/json'});\n        const href = await URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = href;\n        link.download = fileName + \".js\";\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        const f=\"./d.js\"\n        f.write(\"export default \")\n    }\n    render(){\n        const {city,suburb,check_in_date,check_out_date,items} =this.state\n        \n    return (\n        <div className=\"back\">\n            <div className=\"Search\">\n                <h2>Find your place</h2>\n                <br/>\n                \n                <label className=\"ci\"><b>City:</b>\n                    <input type=\"text\" name=\"city\" value={city} placeholder=\"input city name\"\n                    onChange={this.handleInputChange}/>\n                </label>\n                <br/>\n                <label className=\"ci\"><b>Suburb:</b>\n                    <input type=\"text\" name=\"suburb\" value={suburb} placeholder=\"input suburb name\"\n                    onChange={this.handleInputChange}/>  \n                </label>\n                <br/>\n                <label className=\"ci\"><b>Check in:</b>\n                <input type=\"date\" name=\"check_in_date\" value={check_in_date} placeholder=\"input check in date\"\n                onChange={this.handleInputChange}/>\n                </label>\n                <br/>\n                <label className=\"ci\"><b>Check out:</b>\n                    <input type=\"date\" name=\"check_out_date\" value={check_out_date} placeholder=\"input check out date\"\n                    onChange={this.handleInputChange}/>\n                </label>\n                <br/>\n                <button className=\"sea_button\" onClick={()=> {this.getData()}}>\n                    <h3>search</h3>\n                </button>  \n                \n            </div>\n            \n        </div>\n        \n        \n    );\n    }\n}\nexport default Search;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}