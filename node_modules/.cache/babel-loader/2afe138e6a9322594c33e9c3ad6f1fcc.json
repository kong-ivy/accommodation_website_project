{"ast":null,"code":"var _jsxFileName = \"/Users/liuxiaoyan/Desktop/orange/src/Pages/Booking.js\";\nimport React, { Component } from 'react'; //import FullWidthGrid from '../Coponent/layout'\n\nimport Navibar from '../Coponent/Navibar';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport GuestInfo from '../Coponent/Personalinfo';\nimport Paypal from '../Coponent/Paypal';\nexport default class Booking extends Component {\n  constructor(props) {\n    super(props); //console.log(this.props)\n\n    this.handleInputChang2 = event => {\n      event.preventDefault();\n      const parsed = parseInt(event.target.value, 10);\n      this.setState({\n        [event.target.name]: parsed\n      });\n    };\n\n    this.handleInputChange = event => {\n      event.preventDefault();\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = {\n      rid: this.props.r.rid,\n      uid: this.props.user.uid,\n      price: 0,\n      date_start: this.props.s.check_in_date,\n      date_end: this.props.s.check_out_date,\n      last_name: \"\",\n      first_name: \"\",\n      email: \"\",\n      mobile_phone: \"\",\n      payment_statue: false\n    };\n    this.handlepayment = this.handlepayment.bind(this);\n    this.handleprice = this.handleprice.bind(this);\n  }\n\n  handlepayment() {\n    this.setState({\n      payment_statue: true\n    });\n  }\n\n  handleprice() {\n    const checkin = this.props.s.check_in_date;\n    const checkout = this.props.s.check_out_date;\n\n    var moment = require('moment');\n\n    const year1 = moment(checkin).get('year');\n    const year2 = moment(checkout).get('year');\n    const month1 = moment(checkin).get('month');\n    const month2 = moment(checkout).get('month');\n    const day1 = moment(checkin).get('date');\n    const day2 = moment(checkout).get('date');\n    var dif_month = 0;\n    var dif = 0;\n\n    if (year1 === year2 && month1 === month2) {\n      dif = day2 - day1;\n      console.log(dif);\n    }\n\n    if (month1 !== month2) {\n      dif_month = month2 - month1;\n      dif = day2 - day1 + 30 * dif_month;\n    }\n\n    return dif;\n  }\n\n  handlebooking() {\n    let url = \"http://127.0.0.1:8081/v2/booking\";\n    const data = this.state;\n    console.log(data);\n    fetch(url, {\n      method: 'post',\n      headers: {\n        'content-type': 'application/json',\n        'accept': 'application/xml'\n      },\n      body: JSON.stringify(data)\n    }).then(result => {\n      result.json().then(resp => {\n        console.log(resp);\n\n        if (resp === \"order succeed\") {\n          alert(\"order succeed\");\n          this.props.history.push(\"/orders\");\n        }\n      });\n    });\n  }\n\n  render() {\n    const {\n      last_name,\n      first_name,\n      email,\n      mobile_phone\n    } = this.state;\n    const dif = this.handleprice();\n    var total_price = dif * this.props.r.price;\n    this.price = total_price;\n    return React.createElement(\"div\", {\n      className: \"back-ground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(Navibar, {\n      loggedinstatus: this.props.loggedinstatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Your Booking details\"), React.createElement(Grid, {\n      container: true,\n      spacing: 1,\n      className: \"booking-grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      className: \"paper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"STEP 1: Check Your Room information\"), React.createElement(\"div\", {\n      className: \"propertycheck\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Room Name: \"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, this.props.r.name), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Room type:\"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, this.props.r.type), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Room capacity:\"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, this.props.r.capacity), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Check in date:\"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, this.props.s.check_in_date), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"check out date:\"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.props.s.check_out_date))))), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      className: \"paper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Personal-information\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"STEP 2: Please Input Check-in details\"), React.createElement(\"div\", {\n      className: \"guest-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Last name:\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"last_name\",\n      value: last_name,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"First name:\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"first_name\",\n      value: first_name,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Email:\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"email\",\n      value: email,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Mobile phone:\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"mobile_phone\",\n      value: mobile_phone,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    })))))), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      className: \"paper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Payment-detail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"STEP 3: Check Payment details\"), React.createElement(\"div\", {\n      className: \"Payment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \" Price per Night (AU$) : \", React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, this.props.r.price)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \" Nights: \", React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, dif)), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Total (AU$) : \", total_price))))))), React.createElement(\"div\", {\n      className: \"paypal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Paypal, {\n      handlepayment: this.handlepayment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"cancel_button\",\n      onClick: () => this.handlebooking(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"submit\")));\n  }\n\n}","map":{"version":3,"sources":["/Users/liuxiaoyan/Desktop/orange/src/Pages/Booking.js"],"names":["React","Component","Navibar","Paper","Grid","GuestInfo","Paypal","Booking","constructor","props","handleInputChang2","event","preventDefault","parsed","parseInt","target","value","setState","name","handleInputChange","state","rid","r","uid","user","price","date_start","s","check_in_date","date_end","check_out_date","last_name","first_name","email","mobile_phone","payment_statue","handlepayment","bind","handleprice","checkin","checkout","moment","require","year1","get","year2","month1","month2","day1","day2","dif_month","dif","console","log","handlebooking","url","data","fetch","method","headers","body","JSON","stringify","then","result","json","resp","alert","history","push","render","total_price","loggedinstatus","type","capacity"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n//import FullWidthGrid from '../Coponent/layout'\r\nimport Navibar from '../Coponent/Navibar';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport GuestInfo from '../Coponent/Personalinfo';\r\nimport Paypal from '../Coponent/Paypal';\r\n\r\n\r\nexport default class Booking extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        //console.log(this.props)\r\n        this.state={\r\n            rid:this.props.r.rid,\r\n            uid:this.props.user.uid,\r\n            price:0,\r\n            date_start:this.props.s.check_in_date,\r\n            date_end:this.props.s.check_out_date,\r\n            last_name: \"\",\r\n            first_name: \"\",\r\n            email:\"\",\r\n            mobile_phone:\"\",\r\n            payment_statue:false\r\n        }\r\n        this.handlepayment=this.handlepayment.bind(this);\r\n        this.handleprice=this.handleprice.bind(this);\r\n        \r\n    }\r\n    handlepayment(){\r\n        this.setState({\r\n            payment_statue:true\r\n        })\r\n    }\r\n    handleprice(){\r\n        const checkin=this.props.s.check_in_date\r\n        const checkout=this.props.s.check_out_date\r\n        var moment = require('moment');\r\n        const year1=moment(checkin).get('year')\r\n        const year2=moment(checkout).get('year')\r\n        const month1=moment(checkin).get('month')\r\n        const month2=moment(checkout).get('month')\r\n        const day1=moment(checkin).get('date')\r\n        const day2=moment(checkout).get('date')\r\n        var dif_month=0\r\n        var dif=0\r\n        if(year1===year2 && month1===month2){\r\n            dif=day2-day1\r\n            console.log(dif)\r\n        }\r\n        if(month1 !==month2){\r\n            dif_month=month2-month1\r\n            dif=day2-day1+30*dif_month\r\n        }\r\n        \r\n        \r\n\r\n        return dif\r\n    }\r\n    handleInputChang2 = (event) =>{\r\n        event.preventDefault()\r\n        const parsed = parseInt(event.target.value, 10);\r\n        this.setState({\r\n            [event.target.name] : parsed\r\n        })\r\n    }\r\n\r\n    handlebooking(){\r\n        let url=\"http://127.0.0.1:8081/v2/booking\";\r\n        \r\n        const data=this.state\r\n        console.log(data)\r\n        \r\n        fetch(url,{\r\n            method: 'post',\r\n            headers:{\r\n                'content-type':'application/json',\r\n                'accept':'application/xml'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then((result) => {\r\n            result.json().then((resp)=>{\r\n                console.log(resp)\r\n                if(resp===\"order succeed\"){\r\n                    alert(\"order succeed\")\r\n                    this.props.history.push(\"/orders\");\r\n                } \r\n            })\r\n        })\r\n    }\r\n    handleInputChange = (event) =>{\r\n        event.preventDefault()\r\n        this.setState({\r\n            [event.target.name] : event.target.value\r\n        })\r\n    }\r\n    render(){\r\n        const {last_name,first_name,email,mobile_phone} =this.state\r\n        const dif=this.handleprice()\r\n        var total_price=dif*this.props.r.price\r\n        this.price=total_price\r\n        \r\n        \r\n        return (\r\n            <div className=\"back-ground\">\r\n            <Navibar loggedinstatus={this.props.loggedinstatus}/>   \r\n            <div className=\"main\">\r\n                <h2>Your Booking details</h2>\r\n                <Grid container spacing={1} className=\"booking-grid\">\r\n                    <Grid item xs={12} sm={12}>\r\n                    <Paper className=\"paper\">\r\n                    <h5>STEP 1: Check Your Room information</h5>\r\n                    <div className=\"propertycheck\">\r\n                        <div>\r\n                            <p>Room Name: </p>\r\n                            <h5>{this.props.r.name}</h5> \r\n                            <p>Room type:</p>\r\n                            <h5>{this.props.r.type}</h5> \r\n                            <p>Room capacity:</p>\r\n                            <h5>{this.props.r.capacity}</h5>\r\n                            <p>Check in date:</p>\r\n                            <h5>{this.props.s.check_in_date}</h5>\r\n                            <p>check out date:</p>\r\n                            <h5>{this.props.s.check_out_date}</h5>\r\n                        </div>\r\n                    </div>\r\n                    </Paper>\r\n                </Grid>\r\n                    <Grid item xs={12} sm={12}>\r\n                    <Paper className=\"paper\">\r\n                        <div className=\"Personal-information\">\r\n                            <h5>STEP 2: Please Input Check-in details</h5>\r\n                            <div className=\"guest-box\">\r\n                                <p>Last name:\r\n                                <input type=\"text\" name=\"last_name\" value={last_name}\r\n                                onChange={this.handleInputChange}/></p>\r\n                                <p>First name:\r\n                                <input type=\"text\" name=\"first_name\" value={first_name}\r\n                                onChange={this.handleInputChange}/></p>\r\n                                <p>Email:\r\n                                <input type=\"text\" name=\"email\" value={email}\r\n                                onChange={this.handleInputChange}/></p>\r\n                                <p>Mobile phone:\r\n                                <input type=\"text\" name=\"mobile_phone\" value={mobile_phone}\r\n                                onChange={this.handleInputChange}/></p>\r\n                            </div>    \r\n                        </div>\r\n                    </Paper>\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={12}>\r\n                    <Paper className=\"paper\"> \r\n                    <div className=\"Payment-detail\">\r\n                        <h5>STEP 3: Check Payment details</h5>\r\n                        <div className=\"Payment\">\r\n                            <p> Price per Night (AU$) : <h4>{this.props.r.price}</h4></p> \r\n                            <p> Nights: <h4>{dif}</h4></p>\r\n                            <h3>Total (AU$) : {total_price}</h3> \r\n                        </div>\r\n                    </div></Paper>\r\n                    </Grid>\r\n                </Grid>\r\n                </div>\r\n\r\n                <div className=\"paypal\">\r\n                    <Paypal handlepayment={this.handlepayment} />\r\n                    <button className=\"cancel_button\" onClick={()=>this.handlebooking()}>\r\n                    submit\r\n                    </button>\r\n                </div> \r\n                \r\n            </div>\r\n                );\r\n            }\r\n        }\r\n"]},"metadata":{},"sourceType":"module"}