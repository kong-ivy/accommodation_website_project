{"ast":null,"code":"var _jsxFileName = \"/Users/liuxiaoyan/Desktop/orange/src/Pages/orders.js\";\nimport React, { Component } from 'react';\nimport Navibar from \"../Coponent/Navibar\";\nimport Axios from 'axios';\nimport Postorder from './Postorder';\nexport default class Orders extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      reply: []\n    };\n    this.handle_out = this.handle_out.bind(this);\n  }\n\n  handle_out() {\n    this.props.handlelogout();\n  }\n\n  show(rid) {\n    let n = new Noty({\n      text: \"Are you sure to delete this property?\",\n      type: \"success\",\n      theme: \"bootstrap-v4\",\n      layout: \"center\",\n      buttons: [Noty.button(\"yes\", \"btn btn-success\", () => {\n        console.log(\"button has clicked\");\n        this.cancelorder(rid);\n        n.close();\n      }, {\n        id: \"button1\",\n        \"data-status\": \"ok\"\n      }), Noty.button(\"no\", \"btn btn-error\", () => {\n        console.log(\"no\");\n        n.close();\n      })]\n    });\n    n.show(rid);\n  }\n\n  cancelorder(rid) {\n    let url = \"http://127.0.0.1:8081/v2/booking/cancelorder\";\n    const data = {\n      \"rid\": rid,\n      \"uid\": this.props.uid.email\n    };\n    console.log(data);\n    fetch(url, {\n      method: 'post',\n      headers: {\n        'content-type': 'application/json',\n        'accept': 'application/xml'\n      },\n      body: JSON.stringify(data)\n    }).then(result => {\n      result.json().then(resp => {\n        console.log(resp);\n\n        if (resp === \"Your order has been removed\") {\n          alert(\"Your order has been removed\");\n          this.props.history.push(\"/useraccount\");\n        }\n      });\n    });\n  }\n\n  render() {\n    const rep = this.props.order;\n    return React.createElement(\"div\", {\n      className: \"order\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Navibar, {\n      loggedinstatus: this.props.loggedinstatus,\n      handle_out: this.handle_out,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"order_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Your orders\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, rep.map((detail, index) => {\n      return React.createElement(\"div\", {\n        className: \"s_div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Order: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, index + 1)), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"Room id: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, detail.rid)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Room name: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, this.props.r.name)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Room type: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, this.props.r.type)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"City: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, this.props.r.city)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Suburb: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, this.props.r.suburb)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Room address: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, this.props.r.address)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Check in date: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, detail.date_start)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Check out date: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, detail.date_end)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"price per night: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, detail.price)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Total price: \"), React.createElement(\"p\", {\n        className: \"di\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, this.props.price)), React.createElement(\"button\", {\n        className: \"order_cancel\",\n        onClick: () => this.show(detail.rid),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Cancel\"));\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/liuxiaoyan/Desktop/orange/src/Pages/orders.js"],"names":["React","Component","Navibar","Axios","Postorder","Orders","constructor","props","state","reply","handle_out","bind","handlelogout","show","rid","n","Noty","text","type","theme","layout","buttons","button","console","log","cancelorder","close","id","url","data","uid","email","fetch","method","headers","body","JSON","stringify","then","result","json","resp","alert","history","push","render","rep","order","loggedinstatus","map","detail","index","r","name","city","suburb","address","date_start","date_end","price"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Navibar from \"../Coponent/Navibar\";\r\nimport Axios from 'axios';\r\nimport Postorder from './Postorder';\r\n\r\n\r\nexport default class Orders extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            reply:[]  \r\n        }\r\n        this.handle_out=this.handle_out.bind(this);\r\n    }\r\n    \r\n    handle_out(){\r\n        this.props.handlelogout()\r\n    }\r\n    show(rid){\r\n        let n=new Noty({\r\n            text:\"Are you sure to delete this property?\",\r\n            type:\"success\",\r\n            theme:\"bootstrap-v4\",   \r\n            layout: \"center\",\r\n            buttons:[\r\n                Noty.button(\"yes\",\"btn btn-success\",() =>{\r\n                    console.log(\"button has clicked\")\r\n                    this.cancelorder(rid)\r\n                    n.close()\r\n                },{id:\"button1\",\"data-status\":\"ok\"}\r\n                ),\r\n\r\n                Noty.button(\"no\",\"btn btn-error\",()=>{\r\n                    console.log(\"no\")\r\n                    n.close()\r\n                })\r\n            ]\r\n\r\n        })\r\n        n.show(rid);\r\n    }\r\n\r\n    cancelorder(rid){\r\n        let url=\"http://127.0.0.1:8081/v2/booking/cancelorder\";\r\n        const data={\"rid\":rid,\r\n                    \"uid\":this.props.uid.email}\r\n        console.log(data)\r\n        \r\n        fetch(url,{\r\n            method: 'post',\r\n            headers:{\r\n                'content-type':'application/json',\r\n                'accept':'application/xml'\r\n            },\r\n            body: JSON.stringify(data)\r\n        }).then((result) => {\r\n            result.json().then((resp)=>{\r\n                console.log(resp)\r\n                if(resp===\"Your order has been removed\"){\r\n                    alert(\"Your order has been removed\")\r\n                    this.props.history.push(\"/useraccount\");\r\n                } \r\n                \r\n            })\r\n        })\r\n    }\r\n    \r\n    \r\n    render() {\r\n        const rep=this.props.order\r\n        return (\r\n            <div className=\"order\">\r\n                <Navibar loggedinstatus={this.props.loggedinstatus} handle_out={this.handle_out}/>\r\n                <div className=\"order_container\">\r\n                    <h2>Your orders</h2>\r\n                    <div >\r\n                        {rep.map((detail,index) => {\r\n                            return <div className=\"s_div\">\r\n                                <div>\r\n                                    <h2>Order: </h2>\r\n                                    <p className=\"di\">{index+1}</p>\r\n                                </div>\r\n                                <br />\r\n                                <div>\r\n                                    <h3>Room id: </h3>\r\n                                    <p className=\"di\">{detail.rid}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <h3>Room name: </h3>\r\n                                    <p className=\"di\">{this.props.r.name}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <h3>Room type: </h3>\r\n                                    <p className=\"di\">{this.props.r.type}</p>\r\n                                </div>\r\n                                \r\n                                <div>\r\n                                    <h3>City: </h3>\r\n                                    <p className=\"di\">{this.props.r.city}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <h3>Suburb: </h3>\r\n                                    <p className=\"di\">{this.props.r.suburb}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <h3>Room address: </h3>\r\n                                    <p className=\"di\">{this.props.r.address}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <h3>Check in date: </h3>\r\n                                    <p className=\"di\">{detail.date_start}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <h3>Check out date: </h3>\r\n                                    <p className=\"di\">{detail.date_end}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <h3>price per night: </h3>\r\n                                    <p className=\"di\">{detail.price}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <h3>Total price: </h3>\r\n                                    <p className=\"di\">{this.props.price}</p>\r\n                                </div>\r\n                                <button className=\"order_cancel\" onClick={()=>this.show(detail.rid)}>Cancel</button>\r\n                                \r\n                            </div>   \r\n                        })}\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}