{"ast":null,"code":"var _jsxFileName = \"/Users/liuxiaoyan/Desktop/orange/src/Coponent/Search.js\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport { withRouter } from 'react-router-dom';\n\nclass Search extends Component {\n  constructor() {\n    super();\n\n    this.handleInputChange = event => {\n      event.preventDefault();\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.downloadFile = async () => {\n      const {\n        items\n      } = this.state;\n      console.log(\"file\", items);\n      const fileName = \"data\";\n      const json = JSON.stringify(items);\n      const blob = new Blob([\"export default \" + json], {\n        type: 'application/json'\n      });\n      const href = await URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = href;\n      link.download = fileName + \".js\";\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    };\n\n    this.state = {\n      city: \"\",\n      suburb: \"\",\n      check_in_date: \"\",\n      check_out_date: \"\",\n      querystr: \"city=sydney&suburb=maroubra&check_in_date=2020-04-03&check_out_date=2020-04-07\",\n      items: [],\n      search_data: [],\n      isloaded: false\n    };\n    this.getData = this.getData.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  async getData() {\n    const data = this.state;\n    const usp = new URLSearchParams(this.state.querystr);\n    usp.set('city', this.state.city);\n    usp.set('suburb', this.state.suburb);\n    usp.set('check_in_date', this.state.check_in_date);\n    usp.set('check_out_date', this.state.check_out_date);\n    console.log(usp);\n    var url = \"http://127.0.0.1:8081/v2/room/search?\";\n    url += usp;\n    Axios.get(url).then(res => {\n      console.log(\"res:\", res.data);\n      this.props.handlesearchdata(data);\n      this.setState({\n        items: res.data,\n        isloaded: true,\n        search_data: data\n      });\n      this.downloadFile();\n      this.delay(5).then(() => {\n        this.props.history.push(\"/room\");\n      });\n    });\n  }\n\n  delay(ms) {\n    return new Promise(function (resolve, reject) {\n      setTimeout(resolve, ms);\n    });\n  }\n\n  sleep(numberMillis) {\n    var now = new Date();\n    var exitTime = now.getTime() + numberMillis;\n\n    while (true) {\n      now = new Date();\n      if (now.getTime() > exitTime) return;\n    }\n  }\n\n  fun() {\n    this.props.history.push(\"/room\");\n  }\n\n  render() {\n    const {\n      city,\n      suburb,\n      check_in_date,\n      check_out_date\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"back\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Find your place\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"ci\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"City:\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"city\",\n      value: city,\n      placeholder: \"input city name\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"ci\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Suburb:\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"suburb\",\n      value: suburb,\n      placeholder: \"input suburb name\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"ci\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Check in:\"), React.createElement(\"input\", {\n      type: \"date\",\n      name: \"check_in_date\",\n      value: check_in_date,\n      placeholder: \"input check in date\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"ci\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Check out:\"), React.createElement(\"input\", {\n      type: \"date\",\n      name: \"check_out_date\",\n      value: check_out_date,\n      placeholder: \"input check out date\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"sea_button\",\n      onClick: () => {\n        this.getData();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Search\"))));\n  }\n\n}\n\nexport default withRouter(Search);","map":{"version":3,"sources":["/Users/liuxiaoyan/Desktop/orange/src/Coponent/Search.js"],"names":["React","Component","Axios","withRouter","Search","constructor","handleInputChange","event","preventDefault","setState","target","name","value","downloadFile","items","state","console","log","fileName","json","JSON","stringify","blob","Blob","type","href","URL","createObjectURL","link","document","createElement","download","body","appendChild","click","removeChild","city","suburb","check_in_date","check_out_date","querystr","search_data","isloaded","getData","bind","data","usp","URLSearchParams","set","url","get","then","res","props","handlesearchdata","delay","history","push","ms","Promise","resolve","reject","setTimeout","sleep","numberMillis","now","Date","exitTime","getTime","fun","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;;AAGA,MAAMC,MAAN,SAAqBH,SAArB,CAA8B;AAC1BI,EAAAA,WAAW,GAAE;AACT;;AADS,SAgDbC,iBAhDa,GAgDQC,KAAD,IAAU;AAC1BA,MAAAA,KAAK,CAACC,cAAN;AACA,WAAKC,QAAL,CAAc;AACV,SAACF,KAAK,CAACG,MAAN,CAAaC,IAAd,GAAsBJ,KAAK,CAACG,MAAN,CAAaE;AADzB,OAAd;AAGH,KArDY;;AAAA,SAmEbC,YAnEa,GAmEE,YAAY;AACvB,YAAM;AAACC,QAAAA;AAAD,UAAU,KAAKC,KAArB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBH,KAAnB;AACA,YAAMI,QAAQ,GAAG,MAAjB;AACA,YAAMC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeP,KAAf,CAAb;AACA,YAAMQ,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAAC,oBAAkBJ,IAAnB,CAAT,EAAkC;AAACK,QAAAA,IAAI,EAAC;AAAN,OAAlC,CAAb;AACA,YAAMC,IAAI,GAAG,MAAMC,GAAG,CAACC,eAAJ,CAAoBL,IAApB,CAAnB;AACA,YAAMM,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;AACAF,MAAAA,IAAI,CAACH,IAAL,GAAYA,IAAZ;AACAG,MAAAA,IAAI,CAACG,QAAL,GAAgBb,QAAQ,GAAG,KAA3B;AACAW,MAAAA,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,IAA1B;AACAA,MAAAA,IAAI,CAACM,KAAL;AACAL,MAAAA,QAAQ,CAACG,IAAT,CAAcG,WAAd,CAA0BP,IAA1B;AAEH,KAjFY;;AAET,SAAKb,KAAL,GAAa;AACTqB,MAAAA,IAAI,EAAE,EADG;AAETC,MAAAA,MAAM,EAAE,EAFC;AAGTC,MAAAA,aAAa,EAAC,EAHL;AAITC,MAAAA,cAAc,EAAC,EAJN;AAKTC,MAAAA,QAAQ,EAAC,gFALA;AAMT1B,MAAAA,KAAK,EAAC,EANG;AAOT2B,MAAAA,WAAW,EAAC,EAPH;AAQTC,MAAAA,QAAQ,EAAC;AARA,KAAb;AAUA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKtC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBsC,IAAvB,CAA4B,IAA5B,CAAzB;AAEH;;AAED,QAAMD,OAAN,GAAe;AACX,UAAME,IAAI,GAAC,KAAK9B,KAAhB;AACA,UAAM+B,GAAG,GAAE,IAAIC,eAAJ,CAAoB,KAAKhC,KAAL,CAAWyB,QAA/B,CAAX;AACAM,IAAAA,GAAG,CAACE,GAAJ,CAAQ,MAAR,EAAe,KAAKjC,KAAL,CAAWqB,IAA1B;AACAU,IAAAA,GAAG,CAACE,GAAJ,CAAQ,QAAR,EAAiB,KAAKjC,KAAL,CAAWsB,MAA5B;AACAS,IAAAA,GAAG,CAACE,GAAJ,CAAQ,eAAR,EAAwB,KAAKjC,KAAL,CAAWuB,aAAnC;AACAQ,IAAAA,GAAG,CAACE,GAAJ,CAAQ,gBAAR,EAAyB,KAAKjC,KAAL,CAAWwB,cAApC;AACAvB,IAAAA,OAAO,CAACC,GAAR,CAAY6B,GAAZ;AACA,QAAIG,GAAG,GAAC,uCAAR;AACAA,IAAAA,GAAG,IAAEH,GAAL;AACA5C,IAAAA,KAAK,CAACgD,GAAN,CAAUD,GAAV,EACKE,IADL,CACUC,GAAG,IAAE;AACPpC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBmC,GAAG,CAACP,IAAvB;AACA,WAAKQ,KAAL,CAAWC,gBAAX,CAA4BT,IAA5B;AACA,WAAKpC,QAAL,CAAc;AAACK,QAAAA,KAAK,EAAEsC,GAAG,CAACP,IAAZ;AACEH,QAAAA,QAAQ,EAAC,IADX;AAEED,QAAAA,WAAW,EAACI;AAFd,OAAd;AAGA,WAAKhC,YAAL;AACA,WAAK0C,KAAL,CAAW,CAAX,EACCJ,IADD,CACM,MAAM;AACR,aAAKE,KAAL,CAAWG,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACH,OAHD;AAKH,KAbL;AAcH;;AACDF,EAAAA,KAAK,CAACG,EAAD,EAAK;AACN,WAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1CC,MAAAA,UAAU,CAACF,OAAD,EAAUF,EAAV,CAAV;AACH,KAFM,CAAP;AAGH;;AAQDK,EAAAA,KAAK,CAACC,YAAD,EAAe;AAChB,QAAIC,GAAG,GAAG,IAAIC,IAAJ,EAAV;AACA,QAAIC,QAAQ,GAAGF,GAAG,CAACG,OAAJ,KAAgBJ,YAA/B;;AACA,WAAO,IAAP,EAAa;AACTC,MAAAA,GAAG,GAAG,IAAIC,IAAJ,EAAN;AACA,UAAID,GAAG,CAACG,OAAJ,KAAgBD,QAApB,EACI;AACP;AACJ;;AAEDE,EAAAA,GAAG,GAAG;AACF,SAAKhB,KAAL,CAAWG,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACH;;AAgBDa,EAAAA,MAAM,GAAE;AACJ,UAAM;AAAClC,MAAAA,IAAD;AAAMC,MAAAA,MAAN;AAAaC,MAAAA,aAAb;AAA2BC,MAAAA;AAA3B,QAA4C,KAAKxB,KAAvD;AAEJ,WACI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAII;AAAO,MAAA,SAAS,EAAC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAtB,EACI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,MAAxB;AAA+B,MAAA,KAAK,EAAEqB,IAAtC;AAA4C,MAAA,WAAW,EAAC,iBAAxD;AACA,MAAA,QAAQ,EAAE,KAAK9B,iBADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAJJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,EASI;AAAO,MAAA,SAAS,EAAC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAtB,EACI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,QAAxB;AAAiC,MAAA,KAAK,EAAE+B,MAAxC;AAAgD,MAAA,WAAW,EAAC,mBAA5D;AACA,MAAA,QAAQ,EAAE,KAAK/B,iBADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CATJ,EAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbJ,EAcI;AAAO,MAAA,SAAS,EAAC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAtB,EACA;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,eAAxB;AAAwC,MAAA,KAAK,EAAEgC,aAA/C;AAA8D,MAAA,WAAW,EAAC,qBAA1E;AACA,MAAA,QAAQ,EAAE,KAAKhC,iBADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CAdJ,EAkBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlBJ,EAmBI;AAAO,MAAA,SAAS,EAAC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAtB,EACI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,gBAAxB;AAAyC,MAAA,KAAK,EAAEiC,cAAhD;AAAgE,MAAA,WAAW,EAAC,sBAA5E;AACA,MAAA,QAAQ,EAAE,KAAKjC,iBADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAnBJ,EAuBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvBJ,EAyBI;AAAQ,MAAA,SAAS,EAAC,YAAlB;AAA+B,MAAA,OAAO,EAAE,MAAK;AAAC,aAAKqC,OAAL;AAAe,OAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CAzBJ,CADJ,CADJ;AAsCC;;AA5HyB;;AA8H9B,eAAexC,UAAU,CAACC,MAAD,CAAzB","sourcesContent":["import React, {Component} from 'react';\nimport Axios from 'axios';\nimport {withRouter} from 'react-router-dom';\n\n\nclass Search extends Component{\n    constructor(){\n        super()\n        this.state = {\n            city: \"\",\n            suburb: \"\",\n            check_in_date:\"\",\n            check_out_date:\"\",\n            querystr:\"city=sydney&suburb=maroubra&check_in_date=2020-04-03&check_out_date=2020-04-07\",\n            items:[],\n            search_data:[],\n            isloaded:false\n        }\n        this.getData = this.getData.bind(this);\n        this.handleInputChange = this.handleInputChange.bind(this);\n        \n    }\n\n    async getData(){\n        const data=this.state\n        const usp= new URLSearchParams(this.state.querystr)\n        usp.set('city',this.state.city)\n        usp.set('suburb',this.state.suburb)\n        usp.set('check_in_date',this.state.check_in_date)\n        usp.set('check_out_date',this.state.check_out_date)\n        console.log(usp)\n        var url=\"http://127.0.0.1:8081/v2/room/search?\"\n        url+=usp\n        Axios.get(url)\n            .then(res=>{\n                console.log(\"res:\",res.data);\n                this.props.handlesearchdata(data);    \n                this.setState({items: res.data,\n                                isloaded:true,\n                                search_data:data})\n                this.downloadFile()\n                this.delay(5)\n                .then(() => {\n                    this.props.history.push(\"/room\");\n                });    \n                \n            });   \n    }\n    delay(ms) {\n        return new Promise(function (resolve, reject) {\n            setTimeout(resolve, ms);\n        });\n    }\n    \n    handleInputChange = (event) =>{\n        event.preventDefault()\n        this.setState({\n            [event.target.name] : event.target.value\n        })\n    }\n    sleep(numberMillis) {\n        var now = new Date();\n        var exitTime = now.getTime() + numberMillis;\n        while (true) {\n            now = new Date();\n            if (now.getTime() > exitTime)\n                return;\n        }\n    }\n\n    fun() {\n        this.props.history.push(\"/room\");\n    }\n    downloadFile = async () => {\n        const {items} = this.state; \n        console.log(\"file\",items)\n        const fileName = \"data\";\n        const json = JSON.stringify(items);\n        const blob = new Blob([\"export default \"+json],{type:'application/json'});\n        const href = await URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = href;\n        link.download = fileName + \".js\";\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n    }\n    render(){\n        const {city,suburb,check_in_date,check_out_date} =this.state\n        \n    return (\n        <div className=\"back\">\n            <div className=\"Search\">\n                <h2>Find your place</h2>\n                <br/>\n                \n                <label className=\"ci\"><b>City:</b>\n                    <input type=\"text\" name=\"city\" value={city} placeholder=\"input city name\"\n                    onChange={this.handleInputChange}/>\n                </label>\n                <br/>\n                <label className=\"ci\"><b>Suburb:</b>\n                    <input type=\"text\" name=\"suburb\" value={suburb} placeholder=\"input suburb name\"\n                    onChange={this.handleInputChange}/>  \n                </label>\n                <br/>\n                <label className=\"ci\"><b>Check in:</b>\n                <input type=\"date\" name=\"check_in_date\" value={check_in_date} placeholder=\"input check in date\"\n                onChange={this.handleInputChange}/>\n                </label>\n                <br/>\n                <label className=\"ci\"><b>Check out:</b>\n                    <input type=\"date\" name=\"check_out_date\" value={check_out_date} placeholder=\"input check out date\"\n                    onChange={this.handleInputChange}/>\n                </label>\n                <br/>\n                \n                <button className=\"sea_button\" onClick={()=> {this.getData()}}>\n                    <h3>Search</h3>\n                </button>  \n                    \n                \n            </div>\n            \n        </div>\n        \n        \n    );\n    }\n}\nexport default withRouter(Search);\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}